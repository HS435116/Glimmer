# 晨曦智能打卡（Glimmer）用户使用须知

本文面向日常使用人员（普通用户/管理员/工程师），用于快速了解功能与注意事项。

---

## 1. 账号与角色
本系统以服务器账号为准，角色分为：
- **普通用户（user）**：打卡、查看个人记录、加入/退出团队、提交补录申请、团队聊天。
- **管理员（admin）**：在线管理（仅限自己创建的团队）：入队审核、补录审核、成员管理、发布团队公告、创建团队。
- **工程师（engineer）**：全局管理：查看全部团队/用户资料、创建管理员账号、清理全服数据、发布全局公告、版本发布、广告发布等。

> 安全说明：服务器不保存明文密码，仅保存密码哈希。

---

## 2. 新用户首次使用流程
1) **注册账号**：填写用户名、密码，并设置密保问题与答案（用于找回密码）。
2) **配置服务器地址**：在应用的服务器相关设置中填写服务器地址，例如 `http://1.2.3.4:8000`。
3) **配置打卡设置**：进入【设置】页面填写/确认：
   - 位置设置：纬度、经度、打卡半径、自动识别位置
   - 时间设置：打卡开始/结束时间
   - 自动打卡：开关
4) **加入团队**：在【团队管理】输入团队ID（6位）申请加入，等待管理员审核。

---

## 3. 日常功能说明
### 3.1 打卡
- 在规定时间内，根据定位/半径规则进行打卡。
- 打卡会记录打卡时间、状态、备注、经纬度（如有）。

### 3.2 打卡记录查询
- 支持按月查询。
- 应用会对最近查询结果做本地缓存（用于提升体验）。

### 3.3 补录
- 漏打卡可提交补录申请并填写原因。
- 管理员/工程师审核通过后，会自动写入“补录”记录。

### 3.4 公告
- 管理员：可发布自己团队公告。
- 工程师：可发布全局公告。

### 3.5 聊天
- 团队成员可通过服务器中转聊天。
- 服务器不可用时，聊天会禁用并提示，避免崩溃。

---

## 4. 在线管理（管理员/工程师）
进入【在线管理】需要先登录服务器账号（获取 Token）。

### 4.1 管理员（admin）
- **仅管理自己创建的团队**：只会看到自己创建的团队。
- 可执行：入队审核、补录审核、成员管理、发布团队公告、创建团队。

### 4.2 工程师（engineer）
- 服务器用户总人数（红色显示）。
- 用户ID查询：按用户ID查询用户资料（包含最后登录IP、密码哈希等）。
- 创建管理员：输入基础用户名（如 `admin`），系统自动分配可用用户名，默认密码 `admin123`。
- 清理数据：高危操作，二次确认 + 输入密码后，清理全服用户数据（不可恢复）。

---

## 5. 用户ID规则（便于查询）
为便于统一查询，本系统约定：
- 工程师 ID：**固定 999**
- 管理员 ID：**从 1000 开始递增**
- 普通用户 ID：**从 50000 开始递增**

---

## 6. 常见问题
- **登录提示“服务器维护中，请稍后再试。。。”**：通常是服务器地址错误、服务器未启动或网络不可达。
- **加入团队无效/看不到团队**：确认团队ID正确，等待管理员在【入队审核】处理。
- **打卡失败**：检查定位权限、经纬度/半径、是否在允许打卡时间范围。

---

## 7. 重要安全提醒
- 不要把服务器数据库文件放到可被外网直接下载的目录/接口中。
- 工程师“清理数据”为不可恢复操作，请谨慎使用。
- 请妥善保管工程师账号与管理员账号。
